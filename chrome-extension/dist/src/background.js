(()=>{"use strict";({994:function(){this&&this.__awaiter;let e={connected:!1};chrome.runtime.onMessage.addListener(((s,o,r)=>{switch(console.log("Background script received message:",s),s.type){case"checkConnection":return r({connected:e.connected}),!1;case"START_COMPARISON":return chrome.tabs.query({active:!0,currentWindow:!0},(e=>{const s=e[0];s&&s.id?(console.log("Sending INIT_COMPARISON to tab:",s.id),chrome.tabs.sendMessage(s.id,{type:"INIT_COMPARISON"},(e=>{console.log("Content script response:",e),r(e)}))):(console.error("No active tab found"),r({success:!1,error:"No active tab found"}))})),!0;case"FIGMA_FRAMES":return chrome.tabs.query({active:!0,currentWindow:!0},(e=>{const o=e[0];o&&o.id?(console.log("Sending frames to tab:",o.id),chrome.tabs.sendMessage(o.id,{type:"FIGMA_FRAMES",frames:s.frames},(e=>{console.log("Content script response:",e),r(e)}))):(console.error("No active tab found"),r({success:!1,error:"No active tab found"}))})),!0;case"figma-frames":return chrome.tabs.query({active:!0,currentWindow:!0},(e=>{const o=e[0];o&&o.id?chrome.tabs.sendMessage(o.id,{type:"figma-frames",frames:s.frames},(e=>{console.log("Content script response:",e),r(e)})):(console.error("No active tab found"),r({success:!1,error:"No active tab found"}))})),!0;default:return console.log("Unknown message type:",s.type),r({success:!1,error:"Unknown message type"}),!1}})),chrome.runtime.onMessageExternal.addListener(((s,o,r)=>{var n;switch(console.log("Received external message:",s,"from:",o),s.type){case"figmaConnect":e.connected=!0,e.tabId=null===(n=o.tab)||void 0===n?void 0:n.id,r({success:!0}),chrome.runtime.sendMessage({type:"connectionUpdate",connected:!0});break;case"send-to-extension":return s.frames&&Array.isArray(s.frames)?(console.log("Received frames from Figma:",s.frames),chrome.tabs.query({active:!0,currentWindow:!0},(e=>{const o=e[0];(null==o?void 0:o.id)?(console.log("Forwarding frames to content script:",s.frames),chrome.tabs.sendMessage(o.id,{type:"FIGMA_FRAMES",frames:s.frames},(e=>{console.log("Content script response:",e),r({success:!0})}))):(console.error("No active tab found"),r({success:!1,error:"No active tab found"}))})),!0):(console.error("Invalid frame data received:",s),r({success:!1,error:"Invalid frame data"}),!0);default:return console.warn("Unknown message type:",s.type),r({success:!1,error:"Unknown message type"}),!1}return!0}))}})[994]()})();